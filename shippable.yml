# The operating system for our build minion
build_environment: Ubuntu 12.04

# The programming language being used
language: ruby

# Use RVM and Ruby 2.1.2
rvm:
  - 2.1.2

# Set the environment variables
env:
  global:
    - APP_NAME=fathomless-ocean-2995
    - CI_REPORTS=shippable/testresults COVERAGE_REPORTS=shippable/codecoverage
#    - secure: a+WO3TxxmI/lIt5abubetS/sBsREx/EKj6S4gGRAcXvP/XD0oBPIKVd+7bkvqiRkK4r+oGcUb28Ioj2/R2hq2U1Imdt3RRy3D7m9rK3I27Vtk97SKndY/FgEXyqwOn+OyCvqwJbYN2AMVKUm24s1MhMX4WUzkZJjFBNSHeDD0Q8h58Dgj/gskWD4xVLbD3ofZDxSz6maQloUTZTjGUOptYWZAWl3MU3WTrEvDh/G77rfVXpuJnk+XLloRxMRfuewDtmIAb9d+AwoPhYz3y1wsjowzQi5BAmLplc3hFaSf2TjiBd60bXdE1pkjQpkRrGOiE9DMIv/KPhaGXVQr7EGLg==

# Prepare our build minion
#before_install:
#  - which heroku || wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh 

# Prepare the things needed before executing the unit tests
before_script:
  - bundle install
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - rake db:migrate

# The command for executing the unit test
script:
  - rake test

# Deploy the app to Heroku when build is success
#after_success:
#  - test -f ~/.ssh/id_rsa.heroku || ssh-keygen -y -f ~/.ssh/id_rsa > ~/.ssh/id_rsa.heroku && heroku keys:add ~/.ssh/id_rsa.heroku
#  - git remote -v | grep ^heroku || heroku git:remote --app $APP_NAME
#  - git push -f heroku master
#  - heroku run rake db:migrate
