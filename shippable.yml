# The operating system for our build minion
build_environment: Ubuntu 12.04

# The programming language being used
language: ruby

# Use RVM and Ruby 2.1.2
rvm:
  - 2.1.2

# Set the environment variables
env:
  secure: "G4Rf9X8MPFq3wriVpTTlDD5/q+2MbOJdhp4zdpmhhUppWCkoUTNZ1cjZ0sz4bW6o3zwCg4rSq1KB2rbXV39rLkuHNmXc7vpheYho5YEvPy6SFlUsn6cJGApmojxsVJqktqwyvgGL+DI5HjeQijfPf2BLoYKjXTiNMz+bu2o1nRZziqzDhxKpHJm9gUAJNjd3gLvfsjFhvXX11KXTSyPrhbb9HKVE2TZClhH/lgyVfmR/i8a0C7OSj6PPSsOysj/wJPqs32rDKmVEmT2mYPuK2v6D2eiTD9CwneBjCq6EyeK30SIydlkIb80AEDa37NXvRpr5q6OZcRYWYq8idnHQGg=="

# Prepare our build minion
#before_install:
#  - which heroku || wget -qO- https://toolbelt.heroku.com/install-ubuntu.sh | sh 

# Prepare the things needed before executing the unit tests
before_script:
  - bundle install
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - rake db:migrate

# The command for executing the unit test
script:
  - rake test

# Deploy the app to Heroku when build is success
#after_success:
#  - test -f ~/.ssh/id_rsa.heroku || ssh-keygen -y -f ~/.ssh/id_rsa > ~/.ssh/id_rsa.heroku && heroku keys:add ~/.ssh/id_rsa.heroku
#  - git remote -v | grep ^heroku || heroku git:remote --app $APP_NAME
#  - git push -f heroku master
#  - heroku run rake db:migrate
